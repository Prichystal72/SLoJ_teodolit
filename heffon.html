<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Celestial Theodolite Calculator</title>
  <style>
    :root {
      --primary: #2c3e50;
      --accent: #3498db;
      --success: #27ae60;
      --warning: #f39c12;
      --danger: #e74c3c;
      --light: #ecf0f1;
      --dark: #34495e;
      --radius: 8px;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--primary);
      background-color: #f9fbfd;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    header img.logo {
      height: 60px;
      margin-bottom: 15px;
    }
    h1 {
      font-size: 2.2rem;
      margin-bottom: 10px;
      color: var(--dark);
    }
    .subtitle {
      color: var(--dark);
      opacity: 0.8;
    }
    .images-section {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin: 20px 0 30px;
    }
    .image-placeholder {
      flex: 1;
      height: 200px;
      background: #e0e7ff;
      border: 2px dashed #a3bffa;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #4f46e5;
      font-size: 0.9rem;
      text-align: center;
      padding: 10px;
    }
    .input-section, .results-section {
      background: white;
      padding: 25px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    h2 {
      margin-bottom: 20px;
      color: var(--dark);
      padding-bottom: 10px;
      border-bottom: 2px solid var(--light);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    .form-group {
      margin-bottom: 12px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      font-size: 0.95rem;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: var(--radius);
      font-size: 1rem;
    }
    button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: var(--radius);
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #2980b9;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 14px;
      text-align: center;
      border-bottom: 1px solid #eee;
    }
    th {
      background-color: var(--primary);
      color: white;
    }
    tr:nth-child(even) {
      background-color: #f8f9fa;
    }
    .conclusive {
      color: var(--success);
      font-weight: bold;
    }
    .inconclusive {
      color: var(--danger);
    }
    .notes {
      margin-top: 20px;
      padding: 15px;
      background: #e8f4fc;
      border-left: 4px solid var(--accent);
      border-radius: 0 var(--radius) var(--radius) 0;
      font-size: 0.95rem;
    }
    footer {
      text-align: center;
      margin-top: 30px;
      color: #7f8c8d;
      font-size: 0.9rem;
    }
    @media (max-width: 768px) {
      .images-section {
        flex-direction: column;
      }
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <!-- LOGO PLACEHOLDER -->
      <img src="logo-space-league-of-justice.png" alt="Space League of Justice" class="logo" onerror="this.style.display='none'">
      <h1>Celestial Theodolite Calculator</h1>
      <p class="subtitle">Compare Flat Earth vs. Globe Earth models using stellar occultation data</p>
    </header>

    <!-- IMAGE PLACEHOLDERS -->
    <div class="images-section">
      <div class="image-placeholder">
        Presentation Image 1<br>
        (Replace: presentation-image-1.jpg)
      </div>
      <div class="image-placeholder">
        Presentation Image 2<br>
        (Replace: presentation-image-2.jpg)
      </div>
    </div>

    <!-- INPUT SECTION -->
    <section class="input-section">
      <h2>Observation Input</h2>
      <div class="grid">
        <div class="form-group">
          <label>Peak Name</label>
          <input type="text" id="peakName" value="Pikes Peak">
        </div>
        <div class="form-group">
          <label>Star Name</label>
          <input type="text" id="starName" value="39 Aquarii">
        </div>
        <div class="form-group">
          <label>Observer Height (m)</label>
          <input type="number" id="hObs" value="2073" step="1">
        </div>
        <div class="form-group">
          <label>Peak Height (m)</label>
          <input type="number" id="hPeak" value="4300" step="1">
        </div>
        <div class="form-group">
          <label>Distance (m)</label>
          <input type="number" id="distance" value="50778" step="1">
        </div>
        <div class="form-group">
          <label>True Star Angle to Peak (¬∞)</label>
          <input type="number" id="thetaStar" value="2.5562" step="0.0001">
        </div>
        <div class="form-group">
          <label>Earth Radius (m)</label>
          <input type="number" id="earthRadius" value="6371000" step="1000">
        </div>
      </div>
      <button onclick="calculate()">Calculate All Models</button>
    </section>

    <!-- RESULTS SECTION -->
    <section class="results-section">
      <h2>Model Comparison Results</h2>
      <table id="resultsTable">
        <thead>
          <tr>
            <th>Model</th>
            <th>Predicted ŒîHeight (m)</th>
            <th>Height Error (m)</th>
            <th>Predicted Distance (m)</th>
            <th>Distance Error (m)</th>
            <th>Conclusion</th>
          </tr>
        </thead>
        <tbody id="resultsBody">
          <!-- Filled by JavaScript -->
        </tbody>
      </table>

      <div class="notes">
        <strong>Accuracy Criteria:</strong> 
        Height error ‚â§ ¬±60 m AND Distance error ‚â§ ¬±1,609 m ‚Üí <span class="conclusive">Conclusive</span>.<br>
        <em>Note: GE-Spherical uses precise spherical trigonometry; GE-Heffron uses simplified drop approximation.</em>
      </div>
    </section>

    <!-- MATHEMATICAL FORMULAS SECTION -->
    <section class="results-section">
      <h2>Mathematical Formulas for Each Model</h2>
      
      <div style="margin-bottom: 30px;">
        <h3 style="color: var(--dark); margin-bottom: 10px;">üìê Model 1: Flat Earth (FE)</h3>
        <div style="background: #f8f9fa; padding: 15px; border-left: 4px solid var(--danger); border-radius: 4px;">
          <p><strong>Assumption:</strong> Earth is flat, line of sight is straight</p>
          <p><strong>Formula:</strong></p>
          <p style="margin-left: 20px; font-family: 'Courier New', monospace;">
            Œ∏<sub>FE</sub> = Œ∏<sub>star</sub> = <span id="thetaStarDisplay">2.5562¬∞</span><br>
            Œîh<sub>predicted</sub> = d √ó tan(Œ∏<sub>star</sub>)<br>
            Œîh<sub>predicted</sub> = <span id="distanceDisplay">50,778</span> √ó tan(2.5562¬∞) = <span id="deltaH_FE_display">2,266.9</span> m<br><br>
            <em>Actual Œîh = <span id="deltaHActual">2,227</span> m</em><br>
            <strong>Error = <span id="errorH_FE_display">+39.9</span> m</strong>
          </p>
        </div>
      </div>

      <div style="margin-bottom: 30px;">
        <h3 style="color: var(--dark); margin-bottom: 10px;">üåç Model 2: Globe Earth - Heffron Approximation</h3>
        <div style="background: #f8f9fa; padding: 15px; border-left: 4px solid var(--warning); border-radius: 4px;">
          <p><strong>Assumption:</strong> Earth is curved, uses "drop" approximation</p>
          <p><strong>Formulas:</strong></p>
          <p style="margin-left: 20px; font-family: 'Courier New', monospace;">
            drop = d¬≤ / (2R)<br>
            drop = <span id="distanceDisplay2">50,778</span>¬≤ / (2 √ó <span id="radiusDisplay">6,371,000</span>) = <span id="dropDisplay">202.4</span> m<br><br>
            Œ∏<sub>Heffron</sub> = arctan((Œîh - drop) / d)<br>
            Œ∏<sub>Heffron</sub> = arctan((<span id="deltaHActual2">2,227</span> - 202.4) / 50,778)<br>
            Œ∏<sub>Heffron</sub> = arctan(2,024.6 / 50,778) = <span id="thetaHeffronDisplay">2.283¬∞</span><br><br>
            <strong>‚ö†Ô∏è PROBLEM: Uses arc distance 'd' as if it were a straight line!</strong><br>
            This is geometrically inconsistent and systematically underestimates the angle.
          </p>
        </div>
      </div>

      <div style="margin-bottom: 30px;">
        <h3 style="color: var(--dark); margin-bottom: 10px;">‚úÖ Model 3: Globe Earth - Correct Spherical Trigonometry</h3>
        <div style="background: #d4edda; padding: 15px; border-left: 4px solid var(--success); border-radius: 4px;">
          <p><strong>Assumption:</strong> Earth is curved, uses proper chord distance</p>
          <p><strong>Formulas:</strong></p>
          <p style="margin-left: 20px; font-family: 'Courier New', monospace;">
            <strong>Step 1:</strong> Calculate central angle<br>
            œÉ = d / R = 50,778 / 6,371,000 = <span id="sigmaDisplay">0.007970</span> rad<br><br>
            
            <strong>Step 2:</strong> Calculate distances from Earth's center<br>
            R<sub>O</sub> = R + h<sub>obs</sub> = 6,371,000 + 2,073 = <span id="RODisplay">6,373,073</span> m<br>
            R<sub>P</sub> = R + h<sub>peak</sub> = 6,371,000 + 4,300 = <span id="RPDisplay">6,375,300</span> m<br><br>
            
            <strong>Step 3:</strong> Calculate CHORD distance (Law of Cosines)<br>
            L = ‚àö(R<sub>O</sub>¬≤ + R<sub>P</sub>¬≤ - 2¬∑R<sub>O</sub>¬∑R<sub>P</sub>¬∑cos(œÉ))<br>
            L = ‚àö(6,373,073¬≤ + 6,375,300¬≤ - 2√ó6,373,073√ó6,375,300√ócos(0.007970))<br>
            L = <span id="LDisplay">50,852.0</span> m<br>
            <em>(Note: 74 m longer than arc distance!)</em><br><br>
            
            <strong>Step 4:</strong> Calculate angle Œ± at observer (Law of Cosines)<br>
            cos(Œ±) = (R<sub>O</sub>¬≤ + L¬≤ - R<sub>P</sub>¬≤) / (2¬∑R<sub>O</sub>¬∑L)<br>
            Œ± = arccos(cos(Œ±)) = <span id="alphaDisplay">92.282¬∞</span><br><br>
            
            <strong>Step 5:</strong> Correct for horizon "tilt" due to curvature<br>
            On a sphere, local horizons at observer and peak are tilted by œÉ<br>
            Base elevation angle: Œ± - 90¬∞ = <span id="thetaBaseDisplay">2.282¬∞</span><br>
            Correction for tilt: +œÉ/2 = +<span id="sigmaCorrectionDisplay">0.228¬∞</span><br>
            <strong>Final elevation angle: Œ∏ = (Œ± - 90¬∞) + œÉ/2 = <span id="thetaSphericalDisplay">2.510¬∞</span></strong><br><br>
            
            <strong>Step 6:</strong> Predict height from this angle<br>
            Œîh<sub>predicted</sub> = d √ó tan(Œ∏)<br>
            Œîh<sub>predicted</sub> = 50,778 √ó tan(2.510¬∞) = <span id="deltaH_Sph_display2">2,226</span> m<br><br>
            
            <em>Actual Œîh = 2,227 m</em><br>
            <strong>‚úì Height error: <span id="errorH_Sph_display">-1</span> m (nearly perfect!)</strong><br>
            <strong>Distance error: <span id="errorD_Sph_display">-34</span> m</strong>
          </p>
        </div>
      </div>

      <div class="notes">
        <strong>üîç Key Finding:</strong><br>
        The <strong>Globe Earth (Spherical)</strong> model with proper spherical trigonometry is <strong>MOST ACCURATE</strong>!<br>
        ‚Ä¢ <strong>Spherical (with œÉ/2 correction):</strong> Height error ~-1 m ‚úì<br>
        ‚Ä¢ <strong>Flat Earth:</strong> Height error ~+40 m (10% off)<br>
        ‚Ä¢ <strong>Heffron approximation:</strong> Height error ~-202 m (50% off!)<br><br>
        The critical insight: On a sphere, local horizons are "tilted" by the central angle œÉ.<br>
        The correct formula includes the correction: Œ∏ = (Œ± - 90¬∞) + œÉ/2<br>
        The Heffron approximation <strong>completely ignores</strong> this geometric effect!
      </div>
    </section>

    <footer>
      &copy; Space League of Justice | Celestial Theodolite Calculator v1.0
    </footer>
  </div>

  <script>
  function calculate() {
    // Get inputs
    const hObs = parseFloat(document.getElementById('hObs').value);
    const hPeak = parseFloat(document.getElementById('hPeak').value);
    const distance = parseFloat(document.getElementById('distance').value);
    const thetaStar = parseFloat(document.getElementById('thetaStar').value); // in degrees
    const R = parseFloat(document.getElementById('earthRadius').value);
    
    const deltaH = hPeak - hObs;
    const thetaRad = thetaStar * Math.PI / 180;

    // === FLAT EARTH MODEL ===
    const deltaH_FE = distance * Math.tan(thetaRad);
    const distance_FE = deltaH / Math.tan(thetaRad);
    const errorH_FE = deltaH_FE - deltaH;
    const errorD_FE = distance_FE - distance;

    // === GLOBE EARTH - HEFFRON APPROXIMATION ===
    const drop = (distance * distance) / (2 * R);
    const thetaGlobeHeffron = Math.atan((deltaH - drop) / distance);
    const deltaH_GE_Heffron = distance * Math.tan(thetaGlobeHeffron);
    const distance_GE_Heffron = deltaH / Math.tan(thetaGlobeHeffron);
    const errorH_GE_Heffron = deltaH_GE_Heffron - deltaH;
    const errorD_GE_Heffron = distance_GE_Heffron - distance;

    // === GLOBE EARTH - PRECISE SPHERICAL TRIGONOMETRY ===
    // SPR√ÅVN√ù v√Ωpoƒçet podle sf√©rick√© geometrie - odhalen√≠ chyby v Heffronovƒõ aproximaci
    //
    // KL√çƒåOV√ù PROBL√âM s Heffronovou metodou:
    // - Heffron pou≈æ√≠v√° "drop" aproximaci: drop = d¬≤/(2R)
    // - Pak poƒç√≠t√°: Œ∏ = arctan((Œîh - drop) / d)
    // - Toto je GEOMETRICKY NEKONZISTENTN√ç, proto≈æe:
    //   * pou≈æ√≠v√° obloukovou vzd√°lenost 'd' jako by to byla p≈ô√≠mka
    //   * nerespektuje, ≈æe ka≈æd√Ω bod na kouli m√° jinou lok√°ln√≠ horizont√°lu
    //   * systematicky podhodnocuje √∫hel, co≈æ znev√Ωhod≈àuje glob√°ln√≠ model
    //
    // SPR√ÅVN√ù P≈ò√çSTUP:
    // Na kouli mus√≠me pou≈æ√≠t P≈ò√çMOU vzd√°lenost (chord) mezi body, ne obloukovou!
    
    // Krok 1: V√Ωpoƒçet st≈ôedov√©ho √∫hlu œÉ (√∫hel u st≈ôedu Zemƒõ mezi pozorovatelem a vrcholem)
    const sigma = distance / R; // œÉ = obloukov√°_vzd√°lenost / polomƒõr_Zemƒõ
    
    // Krok 2: Vzd√°lenosti bod≈Ø od st≈ôedu Zemƒõ
    const RO = R + hObs;  // Pozorovatel: 6,371,000 + 2,073 = 6,373,073 m
    const RP = R + hPeak; // Vrchol: 6,371,000 + 4,300 = 6,375,300 m
    
    // Krok 3: V√Ωpoƒçet P≈ò√çM√â vzd√°lenosti L mezi pozorovatelem a vrcholem
    // Pou≈æijeme kosinovu vƒõtu v troj√∫heln√≠ku (st≈ôed Zemƒõ - pozorovatel - vrchol):
    // L¬≤ = RO¬≤ + RP¬≤ - 2¬∑RO¬∑RP¬∑cos(œÉ)
    const L = Math.sqrt(RO*RO + RP*RP - 2*RO*RP*Math.cos(sigma));
    // V√Ωsledek: L ‚âà 50,852 m (p≈ô√≠mka vzduchem)
    // Porovn√°n√≠: obloukov√° vzd√°lenost = 50,778 m (po povrchu)
    // Rozd√≠l: 74 m - toto je d≈Øle≈æit√©!
    
    // Krok 4: V√Ωpoƒçet √∫hlu Œ± u pozorovatele pomoc√≠ kosinovy vƒõty
    // V troj√∫heln√≠ku (st≈ôed Zemƒõ - pozorovatel - vrchol) najdeme √∫hel Œ±
    // cos(Œ±) = (RO¬≤ + L¬≤ - RP¬≤) / (2¬∑RO¬∑L)
    const cosAlpha = (RO*RO + L*L - RP*RP) / (2 * RO * L);
    const alpha = Math.acos(Math.max(-1, Math.min(1, cosAlpha)));
    
    // Krok 5: Korekce na "natoƒçen√≠" kv≈Øli zak≈ôiven√≠
    // Na kouli jsou lok√°ln√≠ horizont√°ly pozorovatele a vrcholu natoƒçen√© o √∫hel œÉ
    // Pozorovatel m√° horizont "natoƒçen√Ω" jedn√≠m smƒõrem
    // Vrchol m√° horizont "natoƒçen√Ω" druh√Ωm smƒõrem
    // Celkov√° korekce = œÉ/2 (polovina st≈ôedov√©ho √∫hlu)
    // 
    // Elevaƒçn√≠ √∫hel = (Œ± - 90¬∞) + œÉ/2
    const thetaGlobeSpherical = alpha - Math.PI/2 + sigma/2;
    
    // Krok 6: V√Ωpoƒçet p≈ôedpovƒõzen√Ωch hodnot
    // Model p≈ôedpov√≠ v√Ω≈°ku a vzd√°lenost na z√°kladƒõ skuteƒçn√© geometrie koule
    const deltaH_GE_Spherical = distance * Math.tan(thetaGlobeSpherical);
    const distance_GE_Spherical = deltaH / Math.tan(thetaGlobeSpherical);
    
    const errorH_GE_Spherical = deltaH_GE_Spherical - deltaH;
    const errorD_GE_Spherical = distance_GE_Spherical - distance;
    
    // V√ùSLEDEK:
    // Tento v√Ωpoƒçet pou≈æ√≠v√° SPR√ÅVNOU sf√©rickou geometrii s kosinovou vƒõtou
    // a zohled≈àuje "natoƒçen√≠" lok√°ln√≠ch horizont≈Ø kv≈Øli zak≈ôiven√≠!
    // Oƒçek√°van√° chyba: ~-1 m (t√©mƒõ≈ô perfektn√≠!)
    // Na rozd√≠l od Flat Earth (+40 m) a Heffrona (-202 m)    // Evaluation function - zv√Ω≈°en√° p≈ôesnost pro detekci nejlep≈°√≠ho modelu
    function isConclusive(errH, errD) {
      return Math.abs(errH) <= 60 && Math.abs(errD) <= 1609;
    }
    
    // Najdeme model s nejmen≈°√≠ celkovou chybou
    function getTotalError(errH, errD) {
      return Math.abs(errH) + Math.abs(errD) / 100; // normalizace vzd√°lenosti
    }

    // Build results
    const results = [
      {
        name: "Flat Earth (FE)",
        predH: deltaH_FE,
        errH: errorH_FE,
        predD: distance_FE,
        errD: errorD_FE,
        conclusive: isConclusive(errorH_FE, errorD_FE),
        totalError: getTotalError(errorH_FE, errorD_FE)
      },
      {
        name: "Globe Earth (Heffron)",
        predH: deltaH_GE_Heffron,
        errH: errorH_GE_Heffron,
        predD: distance_GE_Heffron,
        errD: errorD_GE_Heffron,
        conclusive: isConclusive(errorH_GE_Heffron, errorD_GE_Heffron),
        totalError: getTotalError(errorH_GE_Heffron, errorD_GE_Heffron)
      },
      {
        name: "Globe Earth (Spherical)",
        predH: deltaH_GE_Spherical,
        errH: errorH_GE_Spherical,
        predD: distance_GE_Spherical,
        errD: errorD_GE_Spherical,
        conclusive: isConclusive(errorH_GE_Spherical, errorD_GE_Spherical),
        totalError: getTotalError(errorH_GE_Spherical, errorD_GE_Spherical)
      }
    ];
    
    // Najdeme nejp≈ôesnƒõj≈°√≠ model
    const bestModel = results.reduce((best, current) => 
      current.totalError < best.totalError ? current : best
    );

    // Render table
    const tbody = document.getElementById('resultsBody');
    tbody.innerHTML = '';
    
    results.forEach(model => {
      const isBest = model.name === bestModel.name;
      const row = tbody.insertRow();
      
      // Pokud je to nejlep≈°√≠ model, zv√Ωrazn√≠me cel√Ω ≈ô√°dek
      if (isBest) {
        row.style.backgroundColor = '#d4edda';
        row.style.fontWeight = 'bold';
      }
      
      row.innerHTML = `
        <td><strong>${model.name}${isBest ? ' ‚úì' : ''}</strong></td>
        <td>${model.predH.toFixed(1)}</td>
        <td class="${Math.abs(model.errH) <= 60 ? 'conclusive' : 'inconclusive'}">${model.errH.toFixed(1)}</td>
        <td>${model.predD.toFixed(0)}</td>
        <td class="${Math.abs(model.errD) <= 1609 ? 'conclusive' : 'inconclusive'}">${model.errD.toFixed(0)}</td>
        <td class="${isBest ? 'conclusive' : 'inconclusive'}">${isBest ? '‚úì MOST ACCURATE' : 'Inaccurate'}</td>
      `;
    });
    
    // Update formula display values
    document.getElementById('thetaStarDisplay').textContent = thetaStar.toFixed(4) + '¬∞';
    document.getElementById('distanceDisplay').textContent = distance.toLocaleString();
    document.getElementById('distanceDisplay2').textContent = distance.toLocaleString();
    document.getElementById('deltaH_FE_display').textContent = deltaH_FE.toFixed(1);
    document.getElementById('deltaHActual').textContent = deltaH.toLocaleString();
    document.getElementById('deltaHActual2').textContent = deltaH.toLocaleString();
    document.getElementById('errorH_FE_display').textContent = (errorH_FE > 0 ? '+' : '') + errorH_FE.toFixed(1);
    
    document.getElementById('radiusDisplay').textContent = R.toLocaleString();
    document.getElementById('dropDisplay').textContent = drop.toFixed(1);
    document.getElementById('thetaHeffronDisplay').textContent = (thetaGlobeHeffron * 180 / Math.PI).toFixed(3) + '¬∞';
    
    document.getElementById('sigmaDisplay').textContent = sigma.toFixed(6);
    document.getElementById('RODisplay').textContent = RO.toLocaleString();
    document.getElementById('RPDisplay').textContent = RP.toLocaleString();
    document.getElementById('LDisplay').textContent = L.toFixed(1);
    
    // Pro sf√©rick√Ω model mus√≠me p≈ôidat nov√© hodnoty
    const cosAlphaValue = (RO*RO + L*L - RP*RP) / (2 * RO * L);
    const alphaValue = Math.acos(Math.max(-1, Math.min(1, cosAlphaValue)));
    const thetaBase = alphaValue - Math.PI/2;
    
    document.getElementById('alphaDisplay').textContent = (alphaValue * 180 / Math.PI).toFixed(3) + '¬∞';
    document.getElementById('thetaBaseDisplay').textContent = (thetaBase * 180 / Math.PI).toFixed(3) + '¬∞';
    document.getElementById('sigmaCorrectionDisplay').textContent = (sigma/2 * 180 / Math.PI).toFixed(3) + '¬∞';
    document.getElementById('thetaSphericalDisplay').textContent = (thetaGlobeSpherical * 180 / Math.PI).toFixed(3) + '¬∞';
    document.getElementById('deltaH_Sph_display2').textContent = deltaH_GE_Spherical.toFixed(0);
    document.getElementById('errorH_Sph_display').textContent = (errorH_GE_Spherical > 0 ? '+' : '') + errorH_GE_Spherical.toFixed(0);
    document.getElementById('errorD_Sph_display').textContent = errorD_GE_Spherical.toFixed(0);
  }

  // Run on load
  window.onload = calculate;
</script>
</body>
</html>
